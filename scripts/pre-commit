#!/bin/bash

# Pre-commit hook to run formatting and linting
echo "🔍 Running pre-commit checks..."

# Check if we're in a git repository
if ! git rev-parse --git-dir > /dev/null 2>&1; then
  echo "❌ Not in a git repository"
  exit 1
fi

# Run Prettier check
echo "📝 Checking formatting with Prettier..."
if ! npm run format:check; then
  echo "❌ Formatting issues found. Run 'npm run format' to fix them."
  exit 1
fi

# Run ESLint
echo "🔍 Running ESLint..."
if ! npm run lint; then
  echo "❌ Linting issues found. Run 'npm run lint:fix' to fix auto-fixable issues."
  exit 1
fi

echo "✅ All pre-commit checks passed!"
exit 0
